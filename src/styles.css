/* Theme variables */
:root{
  /* Light default */
  --bg:#f8fafc; /* slate-50 */
  --fg:#0f172a; /* slate-900 */
  --muted:#475569; /* slate-600 */
  --surface:#ffffff; /* panel */
  --border:#e5e7eb; /* slate-200 */
  --input-bg:#f1f5f9; /* slate-100 */
  --input-border:#cbd5e1; /* slate-300 */
  --button-bg:#e5e7eb; /* slate-200 */

  --primary:#38bdf8; /* sky-400 */
  --ok:#22c55e; /* green-500 */
  --warn:#f59e0b; /* amber-500 */
  --danger:#ef4444; /* red-500 */
}

/* Dark scheme via media (used when theme=system and OS is dark) */
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f172a; /* slate-900 */
    --fg:#e2e8f0; /* slate-200 */
    --muted:#94a3b8; /* slate-400 */
    --surface:#111827;
    --border:#1f2937;
    --input-bg:#0b1220;
    --input-border:#334155;
    --button-bg:#1f2937;
  }
}

/* Explicit overrides when user forces a theme */
.theme-light{
  --bg:#f8fafc;
  --fg:#0f172a;
  --muted:#475569;
  --surface:#ffffff;
  --border:#e5e7eb;
  --input-bg:#f1f5f9;
  --input-border:#cbd5e1;
  --button-bg:#e5e7eb;
}
.theme-dark{
  --bg:#0f172a;
  --fg:#e2e8f0;
  --muted:#94a3b8;
  --surface:#111827;
  --border:#1f2937;
  --input-bg:#0b1220;
  --input-border:#334155;
  --button-bg:#1f2937;
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto; background:var(--bg); color:var(--fg)}

.container{max-width:880px;margin:0 auto;padding:16px}
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:16px}
.grid{display:grid;gap:12px}
.grid.cols{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
.row{display:flex;gap:8px;align-items:center}
label{font-size:12px;color:var(--muted)}
input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--input-border);background:var(--input-bg);color:var(--fg)}
input:focus{outline:2px solid var(--primary);border-color:transparent}

.actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
button{padding:10px 14px;border-radius:12px;border:none;background:var(--button-bg);color:var(--fg);cursor:pointer}
button.primary{background:var(--primary);color:#00121a;font-weight:700}
button.success{background:var(--ok);color:#06200e}
button.warn{background:var(--warn);color:#1f1300}
button.danger{background:var(--danger)}
button:disabled{opacity:.5;cursor:not-allowed}

.timer{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px 12px}
.stage-icon{margin:8px 0}
.stage-icon img{display:block; height:96px; width:auto; object-fit:contain;}
.timer.phase{border-radius:12px}
.timer.phase.warmup{background:#16a34a;color:#fff}
.timer.phase.work{background:#dc2626;color:#fff}
.timer.phase.rest{background:#f59e0b;color:#1f1300}
.timer.phase.cooldown{background:#2563eb;color:#fff}
.timer.phase .phase,.timer.phase .subtle{color:rgba(255,255,255,.85)}
.timer.phase.rest .phase,.timer.phase.rest .subtle{color:#3a2a00}
.timer.phase .progress{background:rgba(255,255,255,.22);border-color:rgba(255,255,255,.28)}
.timer.phase.rest .progress{background:rgba(0,0,0,.1);border-color:rgba(0,0,0,.15)}
.phase{font-weight:700;color:var(--muted);letter-spacing:.08em;text-transform:uppercase}
.time{font-variant-numeric:tabular-nums;font-size:64px;line-height:1;margin:8px 0 4px}
.progress{height:10px;background:var(--input-bg);border:1px solid var(--border);border-radius:999px;overflow:hidden}
.bar{height:100%;background:linear-gradient(90deg,var(--primary),#60a5fa);width:0%}
.phase.work .bar{background:linear-gradient(90deg,var(--ok),#4ade80)}
.phase.rest .bar{background:linear-gradient(90deg,var(--warn),#fbbf24)}
.phase.cooldown .bar{background:linear-gradient(90deg,#a78bfa,#60a5fa)}

.subtle{color:var(--muted);font-size:12px}
.header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.title{font-size:18px;font-weight:700}
.pill{padding:4px 8px;border-radius:999px;border:1px solid var(--border);color:var(--muted);font-size:12px}

@media (min-width:720px){
  .time{font-size:96px}
}

/* Settings overlay on small screens */
@media (max-width:720px){
  .settings-panel{position:fixed;inset:0;z-index:50;border-radius:0;margin:0;overflow:auto}
}

/* Generic overlay for end-of-routine */
.overlay{position:fixed;inset:0;z-index:60;display:flex;align-items:center;justify-content:center;padding:16px}
.overlay .card{max-width:520px;width:100%;box-shadow:0 10px 30px rgba(0,0,0,.3)}
.overlay .hero{display:flex;flex-direction:column;align-items:center;text-align:center}
.overlay .hero img{display:block;max-width:240px;width:100%;height:auto}
